<?php
function get_random_weekday() {
    $weekdays = array('Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday');
    return $weekdays[array_rand($weekdays)];
}

function generate_hybrid_dates($start_date, $num_weeks, $other_person_dates) {
    $hybrid_dates = array();
    $current_date = new DateTime($start_date);
    for ($i = 0; $i < $num_weeks; $i++) {
        while (true) {
            $weekday = get_random_weekday();
            $hybrid_date = clone $current_date;
            $hybrid_date->modify("next " . $weekday);
            $hybrid_date_str = $hybrid_date->format("Y-m-d");
            if (!in_array($hybrid_date_str, $hybrid_dates) && !in_array($hybrid_date_str, $other_person_dates)) {
                break;
            }
        }
        $hybrid_dates[] = $hybrid_date_str;
        $current_date->modify("+1 week");
    }
    return $hybrid_dates;
}

// Common start date for all persons
$start_date = '2023-08-01';  // Tuesday, August 1, 2023
$num_weeks = 10;

// Number of persons (you can change this value to generate schedules for more persons)
$num_persons = 3;

$all_hybrid_dates = array();
for ($person_num = 1; $person_num <= $num_persons; $person_num++) {
    $other_person_dates = array();
    foreach ($all_hybrid_dates as $hybrid_dates) {
        $other_person_dates = array_merge($other_person_dates, $hybrid_dates);
    }
    $hybrid_dates = generate_hybrid_dates($start_date, $num_weeks, $other_person_dates);
    $all_hybrid_dates[] = $hybrid_dates;
    echo "Person {$person_num}'s Hybrid Dates:<br>";
    echo implode(', ', $hybrid_dates) . "<br><br>";
}
?>
